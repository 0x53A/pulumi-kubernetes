// *** WARNING: this file was generated by the Pulumi Kubernetes codegen tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package v1beta1

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi/sdk/go/pulumi"
)

// CustomResourceConversion describes how to convert different versions of a CR.
type CustomResourceConversion struct {
	// conversionReviewVersions is an ordered list of preferred `ConversionReview` versions the Webhook
	// expects. The API server will use the first version in the list which it supports. If none of the
	// versions specified in this list are supported by API server, conversion will fail for the custom
	// resource. If a persisted Webhook configuration specifies allowed versions and does not include
	// any versions known to the API Server, calls to the webhook will fail. Defaults to `["v1beta1"]`.
	ConversionReviewVersions []string `pulumi:"conversionReviewVersions"`

	// strategy specifies how custom resources are converted between versions. Allowed values are: -
	// `None`: The converter only change the apiVersion and would not touch any other field in the
	// custom resource. - `Webhook`: API Server will call to an external webhook to do the conversion.
	// Additional information
	//   is needed for this option. This requires spec.preserveUnknownFields to be false, and
	// spec.conversion.webhookClientConfig to be set.
	Strategy string `pulumi:"strategy"`

	// webhookClientConfig is the instructions for how to call the webhook if strategy is `Webhook`.
	// Required when `strategy` is set to `Webhook`.
	WebhookClientConfig *WebhookClientConfig `pulumi:"webhookClientConfig"`

}

var _CustomResourceConversionType = reflect.TypeOf((*CustomResourceConversion)(nil)).Elem()

// CustomResourceConversionInput represents an input type that resolves to a CustomResourceConversion.
type CustomResourceConversionInput interface {
	ElementType() reflect.Type

	ToCustomResourceConversionOutput() CustomResourceConversionOutput
	ToCustomResourceConversionOutputWithContext(ctx context.Context) CustomResourceConversionOutput
}

// CustomResourceConversionArgs is a CustomResourceConversionInput whose fields are all Input types.
type CustomResourceConversionArgs struct {
	// strategy specifies how custom resources are converted between versions. Allowed values are: -
	// `None`: The converter only change the apiVersion and would not touch any other field in the
	// custom resource. - `Webhook`: API Server will call to an external webhook to do the conversion.
	// Additional information
	//   is needed for this option. This requires spec.preserveUnknownFields to be false, and
	// spec.conversion.webhookClientConfig to be set.
	Strategy pulumi.StringInput `pulumi:"strategy"`

	// conversionReviewVersions is an ordered list of preferred `ConversionReview` versions the Webhook
	// expects. The API server will use the first version in the list which it supports. If none of the
	// versions specified in this list are supported by API server, conversion will fail for the custom
	// resource. If a persisted Webhook configuration specifies allowed versions and does not include
	// any versions known to the API Server, calls to the webhook will fail. Defaults to `["v1beta1"]`.
	ConversionReviewVersions pulumi.StringArrayInput `pulumi:"conversionReviewVersions"`

	// webhookClientConfig is the instructions for how to call the webhook if strategy is `Webhook`.
	// Required when `strategy` is set to `Webhook`.
	WebhookClientConfig WebhookClientConfigInput `pulumi:"webhookClientConfig"`

}

func (a CustomResourceConversionArgs) ElementType() reflect.Type {
	return _CustomResourceConversionType
}

func (a CustomResourceConversionArgs) ToCustomResourceConversionOutput() CustomResourceConversionOutput {
	return pulumi.ToOutput(a).(CustomResourceConversionOutput)
}

func (a CustomResourceConversionArgs) ToCustomResourceConversionOutputWithContext(ctx context.Context) CustomResourceConversionOutput {
	return pulumi.ToOutputWithContext(ctx, a).(CustomResourceConversionOutput)
}

// CustomResourceConversionOutput is an output type that resolves to a Input.
type CustomResourceConversionOutput struct { *pulumi.OutputState }

func init() { pulumi.RegisterOutputType(CustomResourceConversionOutput{}) }

func (CustomResourceConversionOutput) ElementType() reflect.Type {
	return _CustomResourceConversionType
}

func (o CustomResourceConversionOutput) ConversionReviewVersions() pulumi.StringArrayOutput {
	return o.Apply(func(v CustomResourceConversion) []string {
		return v.ConversionReviewVersions
	}).(pulumi.StringArrayOutput)
}

func (o CustomResourceConversionOutput) Strategy() pulumi.StringOutput {
	return o.Apply(func(v CustomResourceConversion) string {
		return v.Strategy
	}).(pulumi.StringOutput)
}

func (o CustomResourceConversionOutput) WebhookClientConfig() WebhookClientConfigOutput {
	return o.Apply(func(v CustomResourceConversion) *WebhookClientConfig {
		return v.WebhookClientConfig
	}).(WebhookClientConfigOutput)
}

